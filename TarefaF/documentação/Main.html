<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Main</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Main.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Jos&#233; Carlos &lt;jcm300@live.com.pt&gt;
            S&#233;rgio &lt;stoj97@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Main</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo contendo a realiza&#231;&#227;o do jogo Sokoban.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Mapa">Mapa</a> = ((Int, Int), [(Int, Int)], [[(Int, Int)]], Int, [String], [String], Bool, Int)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Command">Command</a><ul class="subs"><li>= <a href="#v:U">U</a></li><li>| <a href="#v:D">D</a></li><li>| <a href="#v:L">L</a></li><li>| <a href="#v:R">R</a></li><li>| <a href="#v:Nada">Nada</a></li></ul></li><li class="src short"><a href="#v:tBCPi">tBCPi</a> :: Int</li><li class="src short"><a href="#v:tBCPf">tBCPf</a> :: Float</li><li class="src short"><a href="#v:main">main</a> :: IO ()</li><li class="src short"><a href="#v:loadMapas">loadMapas</a> :: IO [String]</li><li class="src short"><a href="#v:escolheTema">escolheTema</a> :: IO (Picture, Picture, Picture, Picture, Picture)</li><li class="src short"><a href="#v:escolheNivel">escolheNivel</a> :: [String] -&gt; IO (String, [String], Int)</li><li class="src short"><a href="#v:defMI">defMI</a> :: String -&gt; Int -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:joga">joga</a> :: mundo -&gt; (mundo -&gt; Picture) -&gt; (Event -&gt; mundo -&gt; mundo) -&gt; IO ()</li><li class="src short"><a href="#v:reageTempo">reageTempo</a> :: Float -&gt; mundo -&gt; mundo</li><li class="src short"><a href="#v:desenhaMapa">desenhaMapa</a> :: (Picture, Picture, Picture, Picture, Picture) -&gt; Picture -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; Picture</li><li class="src short"><a href="#v:desenhaTab">desenhaTab</a> :: [String] -&gt; (Float, Float) -&gt; (Picture, Picture, Picture, Picture) -&gt; Picture</li><li class="src short"><a href="#v:desenhaLinha">desenhaLinha</a> :: String -&gt; (Float, Float) -&gt; (Picture, Picture, Picture, Picture) -&gt; Picture</li><li class="src short"><a href="#v:stateGame">stateGame</a> :: (Int, Int) -&gt; Bool -&gt; Picture</li><li class="src short"><a href="#v:reageF">reageF</a> :: [String] -&gt; Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:restart">restart</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:undo">undo</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:mcpMapa">mcpMapa</a> :: [String] -&gt; Int -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; Event -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:reageEvento">reageEvento</a> :: Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:moveBoneco">moveBoneco</a> :: (Int, Int) -&gt; (Int, Int) -&gt; (Int, Int)</li><li class="src short"><a href="#v:convX">convX</a> :: (Int, Int) -&gt; Int -&gt; Int</li><li class="src short"><a href="#v:convY">convY</a> :: (Int, Int) -&gt; Int -&gt; Int</li><li class="src short"><a href="#v:parteMapa">parteMapa</a> :: [String] -&gt; ([String], [String])</li><li class="src short"><a href="#v:contaListasMapa">contaListasMapa</a> :: [String] -&gt; Int</li><li class="src short"><a href="#v:sToI">sToI</a> :: String -&gt; [Int]</li><li class="src short"><a href="#v:liToT">liToT</a> :: [Int] -&gt; (Int, Int)</li><li class="src short"><a href="#v:daCoords">daCoords</a> :: Int -&gt; [String] -&gt; Int -&gt; [(Int, Int)]</li><li class="src short"><a href="#v:removeCardinais">removeCardinais</a> :: [String] -&gt; [(Int, Int)] -&gt; [String] -&gt; [String]</li><li class="src short"><a href="#v:removedalinha">removedalinha</a> :: String -&gt; [(Int, Int)] -&gt; [String] -&gt; String</li><li class="src short"><a href="#v:devolveCaracterB">devolveCaracterB</a> :: String -&gt; Int -&gt; Int -&gt; Char</li><li class="src short"><a href="#v:contalinhasB">contalinhasB</a> :: [String] -&gt; Int -&gt; Int -&gt; String</li><li class="src short"><a href="#v:tuploCoord">tuploCoord</a> :: [String] -&gt; [(Int, Int)]</li><li class="src short"><a href="#v:mudaCoordsCaixas">mudaCoordsCaixas</a> :: Int -&gt; Int -&gt; [(Int, Int)] -&gt; <a href="Main.html#t:Command">Command</a> -&gt; [(Int, Int)]</li><li class="src short"><a href="#v:colocaCaixa">colocaCaixa</a> :: [String] -&gt; (Int, Int) -&gt; [String]</li><li class="src short"><a href="#v:colocaCaixas">colocaCaixas</a> :: [String] -&gt; [(Int, Int)] -&gt; [String]</li><li class="src short"><a href="#v:remInc">remInc</a> :: [String] -&gt; [String]</li><li class="src short"><a href="#v:verificarCI">verificarCI</a> :: [String] -&gt; Bool</li><li class="src short"><a href="#v:verificalinha">verificalinha</a> :: String -&gt; Bool</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Mapa" class="def">Mapa</a> = ((Int, Int), [(Int, Int)], [[(Int, Int)]], Int, [String], [String], Bool, Int)</p><div class="doc"><p>Estado do jogo:</p><ul><li>Dimens&#245;es do mapa</li><li>lista de Coordenadas do boneco no mapa</li><li>lista de lista de Coordenadas</li><li>Score</li><li>Mapa ap&#243;s mover</li><li>Mapa sem cardinais</li><li>Se est&#225; ou n&#227;o completo o n&#237;vel</li><li>lista com os movimentos j&#225; feitos</li><li>n&#250;mero do mapa</li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Command" class="def">Command</a></p><div class="doc"><p>tipo criado em que U (Up), D(Down), L(Left), R(Right) e Nada(caso n&#227;o seja nenhum dos casos)</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:U" class="def">U</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:D" class="def">D</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:L" class="def">L</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:R" class="def">R</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Nada" class="def">Nada</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Command" class="caption collapser" onclick="toggleSection('i:Command')">Instances</p><div id="section.i:Command" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Main.html#t:Command">Command</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Main.html#t:Command">Command</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:tBCPi" class="def">tBCPi</a> :: Int</p><div class="doc"><p>largura e altura do boneco, das caixas e das paredes em Int</p></div></div><div class="top"><p class="src"><a name="v:tBCPf" class="def">tBCPf</a> :: Float</p><div class="doc"><p>largura e altura do boneco, das caixas e das paredes em Float</p></div></div><div class="top"><p class="src"><a name="v:main" class="def">main</a> :: IO ()</p><div class="doc"><p>fun&#231;&#227;o principal que invoca o jogo.</p></div></div><div class="top"><p class="src"><a name="v:loadMapas" class="def">loadMapas</a> :: IO [String]</p><div class="doc"><p>load dos mapas para o jogo</p></div></div><div class="top"><p class="src"><a name="v:escolheTema" class="def">escolheTema</a> :: IO (Picture, Picture, Picture, Picture, Picture)</p><div class="doc"><p>possibilita o jogador escolher o tema</p></div></div><div class="top"><p class="src"><a name="v:escolheNivel" class="def">escolheNivel</a> :: [String] -&gt; IO (String, [String], Int)</p><div class="doc"><p>possibilita o jogador escolher o n&#237;vel</p></div></div><div class="top"><p class="src"><a name="v:defMI" class="def">defMI</a> :: String -&gt; Int -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>define o mapa inicial e alguns valores necess&#225;rios</p></div></div><div class="top"><p class="src"><a name="v:joga" class="def">joga</a> :: mundo -&gt; (mundo -&gt; Picture) -&gt; (Event -&gt; mundo -&gt; mundo) -&gt; IO ()</p><div class="doc"><p>Fun&#231;&#227;o que cria um jogo.</p></div></div><div class="top"><p class="src"><a name="v:reageTempo" class="def">reageTempo</a> :: Float -&gt; mundo -&gt; mundo</p><div class="doc"><p>N&#227;o reage ao passar do tempo.</p></div></div><div class="top"><p class="src"><a name="v:desenhaMapa" class="def">desenhaMapa</a> :: (Picture, Picture, Picture, Picture, Picture) -&gt; Picture -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; Picture</p><div class="doc"><p>Desenha o jogo dentro da janela</p></div></div><div class="top"><p class="src"><a name="v:desenhaTab" class="def">desenhaTab</a> :: [String] -&gt; (Float, Float) -&gt; (Picture, Picture, Picture, Picture) -&gt; Picture</p><div class="doc"><p>Desenha as caixas, paredes e posi&#231;oes finais</p></div></div><div class="top"><p class="src"><a name="v:desenhaLinha" class="def">desenhaLinha</a> :: String -&gt; (Float, Float) -&gt; (Picture, Picture, Picture, Picture) -&gt; Picture</p><div class="doc"><p>Desenha uma linha de caixas, paredes e posi&#231;oes finais</p></div></div><div class="top"><p class="src"><a name="v:stateGame" class="def">stateGame</a> :: (Int, Int) -&gt; Bool -&gt; Picture</p><div class="doc"><p>desenha o estado do jogo</p></div></div><div class="top"><p class="src"><a name="v:reageF" class="def">reageF</a> :: [String] -&gt; Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>fun&#231;ao que reage ao <code>teclar</code> do jogador</p></div></div><div class="top"><p class="src"><a name="v:restart" class="def">restart</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>fun&#231;ao restart que reinicia o nivel</p></div></div><div class="top"><p class="src"><a name="v:undo" class="def">undo</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>fun&#231;ao undo que volta um passo atr&#225;s</p></div></div><div class="top"><p class="src"><a name="v:mcpMapa" class="def">mcpMapa</a> :: [String] -&gt; Int -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; Event -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>permite passar para o mapa anterior ou seguinte</p></div></div><div class="top"><p class="src"><a name="v:reageEvento" class="def">reageEvento</a> :: Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Reage ao pressionar das setas do teclado, movendo o boneco 40 pix&#233;is numa dire&#231;&#227;o</p></div></div><div class="top"><p class="src"><a name="v:moveBoneco" class="def">moveBoneco</a> :: (Int, Int) -&gt; (Int, Int) -&gt; (Int, Int)</p><div class="doc"><p>Move o boneco uma coordenada para o lado</p></div></div><div class="top"><p class="src"><a name="v:convX" class="def">convX</a> :: (Int, Int) -&gt; Int -&gt; Int</p><div class="doc"><p>Converte de Pixeis para coordenada x do mapa em listas de strings</p></div></div><div class="top"><p class="src"><a name="v:convY" class="def">convY</a> :: (Int, Int) -&gt; Int -&gt; Int</p><div class="doc"><p>Converte de Pixeis para coordenada y do mapa em listas de strings</p></div></div><div class="top"><p class="src"><a name="v:parteMapa" class="def">parteMapa</a> :: [String] -&gt; ([String], [String])</p><div class="doc"><p>Divide o mapa em tabuleiro e coordenadas. Para isso usamos a fun&#231;&#227;o splitAt...</p><pre>splitAt :: Int -&gt; [a] -&gt; ([a], [a])
</pre><pre>splitAt 3 [1,2,3,4,5] == ([1,2,3],[4,5])</pre></div></div><div class="top"><p class="src"><a name="v:contaListasMapa" class="def">contaListasMapa</a> :: [String] -&gt; Int</p><div class="doc"><p>Devolve o n&#186; de linhas do tabuleiro.</p><p>Nesta fun&#231;&#227;o usamos <em>isDigit</em> pertencente ao Data.Char para verificarmos se o elemento &#233; ou n&#227;o um algarismo (0,...9). </p></div></div><div class="top"><p class="src"><a name="v:sToI" class="def">sToI</a> :: String -&gt; [Int]</p><div class="doc"><p>Converte uma String numa lista de dois n&#250;meros.</p></div></div><div class="top"><p class="src"><a name="v:liToT" class="def">liToT</a> :: [Int] -&gt; (Int, Int)</p><div class="doc"><p>Recebe uma lista de dois numeros tuplos.</p></div></div><div class="top"><p class="src"><a name="v:daCoords" class="def">daCoords</a> :: Int -&gt; [String] -&gt; Int -&gt; [(Int, Int)]</p><div class="doc"><p>D&#225; as coordenadas de cada caracter do mapa numa lista.</p></div></div><div class="top"><p class="src"><a name="v:removeCardinais" class="def">removeCardinais</a> :: [String] -&gt; [(Int, Int)] -&gt; [String] -&gt; [String]</p><div class="doc"><p>Remove os cardinais desnecess&#225;rios do tabuleiro.</p></div></div><div class="top"><p class="src"><a name="v:removedalinha" class="def">removedalinha</a> :: String -&gt; [(Int, Int)] -&gt; [String] -&gt; String</p><div class="doc"><p>Remove os cardinais desnecess&#225;rios de uma linha...</p></div></div><div class="top"><p class="src"><a name="v:devolveCaracterB" class="def">devolveCaracterB</a> :: String -&gt; Int -&gt; Int -&gt; Char</p><div class="doc"><p>Fun&#231;&#227;o que devolve o caracter de uma certa lista.</p></div></div><div class="top"><p class="src"><a name="v:contalinhasB" class="def">contalinhasB</a> :: [String] -&gt; Int -&gt; Int -&gt; String</p><div class="doc"><p>Devolve a linha do n&#186; introduzido contando de cima para baixo.</p></div></div><div class="top"><p class="src"><a name="v:tuploCoord" class="def">tuploCoord</a> :: [String] -&gt; [(Int, Int)]</p><div class="doc"><p>Transforma as strings das coordenadas numa lista de tuplos.</p></div></div><div class="top"><p class="src"><a name="v:mudaCoordsCaixas" class="def">mudaCoordsCaixas</a> :: Int -&gt; Int -&gt; [(Int, Int)] -&gt; <a href="Main.html#t:Command">Command</a> -&gt; [(Int, Int)]</p><div class="doc"><p>muda as coordenadas das caixas caso o boneco empurre uma delas</p></div></div><div class="top"><p class="src"><a name="v:colocaCaixa" class="def">colocaCaixa</a> :: [String] -&gt; (Int, Int) -&gt; [String]</p><div class="doc"><p>Coloca as caixas numa linha.</p></div></div><div class="top"><p class="src"><a name="v:colocaCaixas" class="def">colocaCaixas</a> :: [String] -&gt; [(Int, Int)] -&gt; [String]</p><div class="doc"><p>Coloca as caixas no mapa.</p></div></div><div class="top"><p class="src"><a name="v:remInc" class="def">remInc</a> :: [String] -&gt; [String]</p><div class="doc"><p>Fun&#231;&#227;o que remove as coordenadas incorretas (as coordenadas que s&#243; tem um n&#250;mero ou as coordenadas que t&#234;m caracteres inv&#225;lidos).</p></div></div><div class="top"><p class="src"><a name="v:verificarCI" class="def">verificarCI</a> :: [String] -&gt; Bool</p><div class="doc"><p>verifica se o mapa tem todas as caixas na posi&#231;&#227;o final</p></div></div><div class="top"><p class="src"><a name="v:verificalinha" class="def">verificalinha</a> :: String -&gt; Bool</p><div class="doc"><p>verifica se numa linha linha existe alguma caixa fora da posi&#231;&#227;o final.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>